{% extends "base_dashboard.html" %}
{% load crispy_forms_tags %}
{% load static %}

{% block content %}

	<div class="page-wrapper">
<!-- Page header -->
<div class="page-header d-print-none">
	<div class="container-xl">
		<div class="row g-2 align-items-center">
			<div class="col">
				<h2 class="page-title">
					Datatables
				</h2>



				<a href="#" class="btn btn-primary ms-auto" data-bs-toggle="modal" data-bs-target="#modal-crear-cita">
					+
			   </a>
			   
			   {% include 'formularios/crear_cita.html' %}

			

				  {% include 'layout/mensajes.html' %}

			</div>
		</div>
	</div>
</div>



		<!-- Page body -->
		<div class="page-body">
			<div class="container-xl">
				<div class="row">
					{% for cita in citas %}
					<div class="col-md-4 mb-4">
						<!-- LÃ­nea superior de estado -->
						<div class="card shadow-sm border-0 position-relative">
							<div class="status-indicator 
								{% if cita.estado == 'completada' %}
  bg-success
{% elif cita.estado == 'cancelada' %}
  bg-danger
{% elif cita.estado == 'agendada' %}
  bg-warning
{% endif %} ">
							</div>
							
							<div class="card-body pt-3">
								<!-- Encabezado con fecha destacada -->
								<div class="d-flex justify-content-between align-items-center mb-3">
									<div class="text-center">
										<div class="h5 mb-0 text-primary">
											<i class="fas fa-calendar-day me-2"></i>
											{{ cita.fecha_hora|date:"d M"|upper }}
										</div>
										<small class="text-muted">
											{{ cita.fecha_hora|date:"H:i" }}
										</small>
									</div>
									<!-- Badge de estado -->
									<span class="badge 
									{% if cita.estado == 'completada' %}
									  bg-success
									{% elif cita.estado == 'cancelada' %}
									  bg-danger
									{% elif cita.estado == 'agendada' %}
									  bg-warning
									{% endif %}
									text-dark border rounded-pill">
									{{ cita.estado }}
								  </span>
								  
								</div>
		
								<!-- Contenido de la cita -->
								<h5 class="card-title text-dark mb-3">{{ cita.asunto }}</h5>
								<ul class="list-unstyled mb-0">
									<li class="mb-2">
										<i class="fas fa-user-graduate me-2 text-muted"></i>
										<span class="text-dark">{{ cita.estudiante }}</span>
									</li>
									<li class="mb-2">
										<i class="fas fa-brain me-2 text-muted"></i>
										<span class="text-dark">{{ cita.psicologo }}</span>
									</li>
									<li>
										<small class="text-muted">ID: {{ cita.id }}</small>
									</li>
								</ul>
							</div>
		
							<!-- Footer con botones -->
							<div class="card-footer bg-transparent border-top pt-3">
								<div class="d-flex justify-content-between align-items-center">
									<a href="#" class="btn btn-sm btn-outline-primary" 
									   data-bs-toggle="modal" 
									   data-bs-target="#modal-editar-cita-{{ cita.id }}">
										<i class="fas fa-edit me-1"></i>Editar
									</a>
								
									<a href="#" class="btn btn-sm btn-outline-danger"
										data-bs-toggle="modal" 
										data-bs-target="#modal-eliminar-cita-{{ cita.id }}">
										<i class="fas fa-trash me-1"></i>Eliminar
									</a>
								</div>
							</div>
						</div>
					</div>
		
					{% if forloop.counter|divisibleby:"3" and not forloop.last %}
					</div><div class="row">
					{% endif %}
					{% empty %}
					<div class="col-12">
						<div class="alert alert-info">No hay citas disponibles.</div>
					</div>
					{% endfor %}
				</div>
			



		
		
	</div>
	

	{% for cita in citas %}
  
    {% include "formularios/editar_cita.html" with cita=cita %}
	{% include "formularios/eliminar_cita.html" with cita=cita %}
    
{% endfor %}

		<style>
			.status-indicator {
				height: 4px;
				width: 100%;
				border-radius: 2px 2px 0 0;
			}
			
			.card {
				transition: transform 0.2s, box-shadow 0.2s;
				border-radius: 8px;
			}
			
			.card:hover {
				transform: translateY(-2px);
				box-shadow: 0 5px 15px rgba(0,0,0,0.1);
			}
			
			.badge {
				font-size: 0.8rem;
				padding: 0.5em 0.75em;
			}
			
			.card-title {
				font-weight: 600;
				border-bottom: 1px solid #eee;
				padding-bottom: 0.75rem;
			}
		</style>
		  



<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Inicializar DataTables
        const table = new DataTable('#usuariosTable', {
            language: {
                url: 'https://cdn.datatables.net/plug-ins/2.2.1/i18n/es-ES.json'
            },
           
        });

       

		
	
    });

    
</script>
	<!-- Libs JS -->

</body>
{% endblock %}

</html>
